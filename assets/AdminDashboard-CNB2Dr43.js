import{j as e,m as k,A as P,R as le,a as ne}from"./vendor-ui-CMso90iE.js";import{a as i,R as ie}from"./vendor-react-V1NwqAnN.js";import{L as oe,u as W,q as de,c as ce,d as me,w as ge,g as xe,e as ue,b as he}from"./index-DVQGbPOG.js";import{c as Q,h as pe,a as ye,b as be,u as fe,T as E,C as z,d as V,S as _,e as je}from"./FormField-Cp-MkgIj.js";const C=i.forwardRef(({children:m,variant:l="primary",size:f="md",isLoading:o=!1,loadingText:j,leftIcon:x,rightIcon:u,fullWidth:g=!1,disabled:r,className:s="",...c},n)=>{const w="inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors",h={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-500"},I={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return e.jsx(k.button,{ref:n,whileTap:{scale:.98},disabled:r||o,className:`
          ${w}
          ${h[l]}
          ${I[f]}
          ${g?"w-full":""}
          ${r||o?"opacity-60 cursor-not-allowed pointer-events-none":""}
          ${s}
        `,...c,children:o?e.jsxs(e.Fragment,{children:[e.jsx(oe,{size:"sm",color:l==="secondary"||l==="ghost"?"gray":"white"}),j&&e.jsx("span",{className:"ml-2",children:j})]}):e.jsxs(e.Fragment,{children:[x&&e.jsx("span",{className:"mr-2",children:x}),m,u&&e.jsx("span",{className:"ml-2",children:u})]})})});C.displayName="Button";const ve=i.forwardRef(({children:m,size:l="md",...f},o)=>{const j={sm:"p-1.5",md:"p-2",lg:"p-3"};return e.jsx(C,{ref:o,size:l,className:j[l],...f,children:m})});ve.displayName="IconButton";const ke=()=>e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},className:"relative w-8 h-8",children:e.jsx(k.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"absolute inset-0 border-2 border-blue-500 dark:border-blue-400 rounded-full border-t-transparent"})}),we=()=>e.jsx("svg",{className:"w-6 h-6 text-gray-400 dark:text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),Ne=()=>e.jsx(k.svg,{initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"w-8 h-8 text-blue-500 dark:text-blue-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m0-16l-4 4m4-4l4 4"})}),Se=()=>e.jsx(k.svg,{initial:{scale:0},animate:{scale:1},className:"w-8 h-8 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});function B({onFileSelect:m,accept:l="image/*",maxSize:f=5,title:o="Upload File",description:j="Drag and drop a file here, or click to select",variant:x="default",isLoading:u=!1}){const[g,r]=i.useState(!1),[s,c]=i.useState(null),n=ie.useRef(null),w=p=>p.size>f*1024*1024?{type:"size",message:`File size exceeds ${f}MB limit`}:!l.includes("*")&&!l.includes(p.type)?{type:"type",message:"Invalid file type"}:null,h=i.useCallback(p=>{if(p.preventDefault(),r(!1),c(null),u)return;const T=p.dataTransfer.files[0];if(T){const D=w(T);if(D){c(D);return}m(T)}},[m,f,l,u]),I=i.useCallback(p=>{p.preventDefault(),u||(r(!0),c(null))},[u]),$=i.useCallback(p=>{p.preventDefault(),r(!1)},[]),v=()=>{u||(c(null),n.current?.click())},S=p=>{if(u)return;const T=p.target.files?.[0];if(T){const D=w(T);if(D){c(D);return}m(T)}p.target.value=""},N=x==="compact";return e.jsxs(k.div,{onClick:v,onDrop:h,onDragOver:I,onDragLeave:$,initial:{opacity:0},animate:{opacity:1,borderColor:g?"#3B82F6":s?"#EF4444":void 0,scale:g?1.02:1},transition:{duration:.2},className:`
        relative cursor-pointer
        ${N?"p-3":"p-6"}
        rounded-lg border-2 border-dashed
        ${u?"cursor-wait ":""}
        ${s?"border-red-500 bg-red-50 dark:bg-red-900/20":g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}
        transition-colors duration-200
      `,children:[e.jsx("input",{ref:n,type:"file",accept:l,onChange:S,className:"hidden",disabled:u}),e.jsx(P,{mode:"wait",children:u?e.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute inset-0 flex flex-col items-center justify-center bg-white/50 dark:bg-gray-800/50 rounded-lg backdrop-blur-sm",children:[e.jsx(ke,{}),e.jsx(k.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"text-blue-500 dark:text-blue-400 font-medium mt-2",children:"Uploading..."})]},"loading"):s?e.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50/50 dark:bg-red-900/30 rounded-lg backdrop-blur-sm",children:[e.jsx(Se,{}),e.jsxs(k.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"text-red-500 dark:text-red-400 font-medium text-center",children:[s.message,e.jsx("p",{className:"text-sm mt-1 text-red-400 dark:text-red-300",children:"Click or drag a new file to try again"})]})]},"error"):g?e.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute inset-0 flex flex-col items-center justify-center bg-blue-50/50 dark:bg-blue-900/30 rounded-lg backdrop-blur-sm",children:[e.jsx(Ne,{}),e.jsx(k.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"text-blue-500 dark:text-blue-400 font-medium",children:"Drop to upload"})]},"dragging"):e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`text-center ${N?"space-y-1":"space-y-2"}`,children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(we,{}),e.jsx("div",{className:`${N?"text-sm":"text-base"} font-medium text-gray-900 dark:text-white`,children:o}),e.jsx("p",{className:`${N?"text-xs":"text-sm"} text-gray-500 dark:text-gray-400`,children:j}),e.jsxs("p",{className:`${N?"text-xs":"text-sm"} text-gray-400 dark:text-gray-500`,children:["Max size: ",f,"MB"]})]})},"normal")})]})}const Ce=()=>{const[m,l]=i.useState(()=>{const r=localStorage.getItem("admin_contents");return r?JSON.parse(r):[]});i.useEffect(()=>{localStorage.setItem("admin_contents",JSON.stringify(m)),console.log("Contents saved to localStorage:",m)},[m]),i.useEffect(()=>()=>{m.forEach(r=>{if(r.imageUrl){const s=r.imageUrl.includes("firebasestorage.googleapis.com");Q(r.imageUrl,s)}})},[]);const f=i.useCallback(r=>{const s=`content-${Date.now()}`,c=Date.now(),n={...r,id:s,createdAt:c,updatedAt:c};return l(w=>[...w,n]),s},[]),o=i.useCallback((r,s)=>{l(c=>c.map(n=>n.id===r?{...n,...s,updatedAt:Date.now()}:n))},[]),j=i.useCallback(r=>{l(s=>{const c=s.find(n=>n.id===r);if(c?.imageUrl){const n=c.imageUrl.includes("firebasestorage.googleapis.com");Q(c.imageUrl,n)}return s.filter(n=>n.id!==r)})},[]),x=i.useCallback(async(r,s,c="Uploaded Image")=>(console.log(`Starting upload of ${s} image:`,{fileName:r.name,fileSize:r.size,fileType:r.type}),new Promise((n,w)=>{try{pe(r,s,(h,I)=>{console.log(`Adding ${s} content with Firebase Storage URL`);const $=f({type:s,title:c,content:"",imageUrl:h,scale:1});console.log(`${s} image added with ID:`,$),n($)})}catch(h){console.error(`Error uploading ${s} image:`,h),w(h)}})),[f]),u=i.useCallback((r,s)=>{o(r,{scale:s})},[o]),g=i.useCallback((r,s)=>{o(r,{displayText:s})},[o]);return{contents:m,addContent:f,updateContent:o,deleteContent:j,uploadImage:x,updateImageScale:u,updateImageDisplayText:g}},Ie=({className:m="",onClick:l})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-5 h-5 ${m}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:l,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),De=({id:m,src:l,alt:f,scale:o=1,onScaleChange:j,onDelete:x,className:u=""})=>{const[g,r]=i.useState(o),[s,c]=i.useState(!1);i.useEffect(()=>{r(o)},[o]);const n=w=>{const h=parseFloat(w.target.value);r(h),j(m,h)};return e.jsx("div",{className:`group border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-all duration-200 ${u}`,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:[e.jsx("img",{src:l,alt:f,className:"w-full h-full object-contain transition-transform duration-200",style:{transform:`scale(${g})`}}),e.jsx("button",{onClick:()=>x(m),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete image",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-black/50 backdrop-blur-sm p-2 transition-opacity duration-200 ${s?"opacity-100":"opacity-0"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-white text-xs",children:"Small"}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:g,onChange:n,className:"flex-grow h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),e.jsx("span",{className:"text-white text-xs",children:"Large"})]}),e.jsxs("div",{className:"text-center text-white text-xs mt-1",children:[Math.round(g*100),"%"]})]})]})})})},Te=()=>{const[m,l]=i.useState(""),[f,o]=i.useState({}),[j,x]=i.useState([]),[u,g]=i.useState(""),[r,s]=i.useState(!1),{saveTemplate:c,currentUser:n}=W(),w=async()=>{if(!m.trim()){g("Template name cannot be empty.");return}s(!0),g("");try{n&&(await c(m,f,n),l(""),o({}))}catch{g("Failed to save template.")}finally{s(!1)}};return i.useEffect(()=>{(async()=>{if(n){s(!0);try{const I=de(ce(me,"templates"),ge("userId","==",n.uid)),v=(await xe(I)).docs.map(S=>({id:S.id,templateName:S.data().templateName,templateData:S.data().templateData,createdAt:S.data().createdAt}));x(v)}catch{g("Failed to load templates.")}finally{s(!1)}}})()},[n]),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create a New Template"}),u&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:u})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"templateName",className:"block text-gray-700 text-sm font-bold mb-2",children:"Template Name"}),e.jsx("input",{type:"text",id:"templateName",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:m,onChange:h=>l(h.target.value),placeholder:"Enter template name"})]}),e.jsx("button",{onClick:w,disabled:r,className:`bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Saving...":"Save Template"}),e.jsx("h3",{className:"text-lg font-bold mt-6",children:"Your Templates"}),r?e.jsx("p",{children:"Loading templates..."}):j.length===0?e.jsx("p",{children:"No templates found."}):e.jsx("ul",{children:j.map(h=>e.jsx("li",{className:"mt-2 p-2 border rounded",children:e.jsxs("p",{className:"font-semibold",children:["Template Name: ",h.templateName]})},h.id))})]})};function Ee(){const{currentUser:m}=W(),{showToast:l}=ue(),{theme:f}=he(),{questions:o,addQuestion:j,updateQuestion:x,deleteQuestion:u}=ye(),{sections:g,addSection:r,updateSection:s,deleteSection:c,reorderSections:n}=be(),{deleteContent:w,uploadImage:h,updateImageScale:I,updateImageDisplayText:$}=Ce(),{getBannerImage:v,getScannerImages:S}=fe(),[N,p]=i.useState(null),[T,D]=i.useState(null),[U,G]=i.useState(1),M=9,Y=a=>{const t=o.find(y=>y.id===a);if(!t)return;const d={id:`option-${Date.now()}`,text:"",value:"",scale:1};x(a,{options:[...t.options||[],d]}),l("success","New answer option added")},J=(a,t)=>d=>{const y=o.find(b=>b.id===a);y&&x(a,{options:y.options?.map(b=>b.id===t?{...b,text:d.target.value,value:d.target.value.toLowerCase()}:b)})},H=(a,t)=>d=>{const y=o.find(b=>b.id===a);y&&x(a,{options:y.options?.map(b=>b.id===t?{...b,scale:parseFloat(d.target.value)}:b)})},K=async(a,t,d)=>{if(N){l("error","Please wait for the current upload to complete");return}try{p({questionId:a,optionId:t}),await new Promise(y=>{je(d,(b,se)=>{const O=o.find(F=>F.id===a);O&&(x(a,{options:O.options?.map(F=>F.id===t?{...F,imageUrl:b,imagePreview:se,scale:1}:F)}),y())})}),l("success","Image uploaded successfully")}catch{l("error","Failed to upload image")}finally{p(null)}},X=(a,t)=>{const d=o.find(y=>y.id===a);d&&x(a,{options:d.options?.map(y=>y.id===t?{...y,imageUrl:void 0,imagePreview:void 0,scale:void 0}:y)})},Z=(a,t)=>d=>{const y=o.find(b=>b.id===a);y&&x(a,{options:y.options?.map(b=>b.id===t?{...b,linkedSectionId:d.target.value||void 0}:b)})},q=async a=>{if(N){l("error","Please wait for the current upload to complete");return}try{p({contentType:"banner"});const t=await h(a,"banner","Banner Image");D(t),l("success","Banner image uploaded successfully")}catch(t){l("error","Failed to upload banner image"),console.error("Error uploading banner image:",t)}finally{p(null)}},ee=async a=>{if(N){l("error","Please wait for the current upload to complete");return}try{p({contentType:"scanner"});const t=await h(a,"scanner","Scanner Variation");D(t),console.log("Scanner image uploaded with ID:",t),console.log("Current scanner images:",S()),l("success","Scanner image uploaded successfully")}catch(t){l("error","Failed to upload scanner image"),console.error("Error uploading scanner image:",t)}finally{p(null)}},ae=a=>t=>{const d=parseFloat(t.target.value);I(a,d),D(a)},te=(a,t)=>{$(a,t)},R=a=>{w(a),T===a&&D(null),l("success","Image deleted successfully")},re=()=>{const a=S(),t=(U-1)*M;return a.slice(t,t+M)},A=()=>{const a=S().length;return Math.ceil(a/M)},L=a=>{G(a)};return m?.isOwner?e.jsxs("div",{className:`max-w-7xl mx-auto p-6 space-y-12 ${f==="dark"?"dark":""}`,children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-white",children:"Admin Dashboard"}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Image Management"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-4",children:"Banner Image"}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:v()?e.jsx("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:e.jsx("img",{src:v()?.src,alt:v()?.alt||"Banner image",className:"w-full h-full object-contain",style:{transform:`scale(${v()?.scale||1})`}})}):e.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No banner image uploaded"})})}),v()&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Image Scale (",((v()?.scale||1)*100).toFixed(0),"%)"]}),e.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:v()?.scale||1,onChange:ae(v()?.id||""),className:"w-full"},`banner-scale-${v()?.id}-${v()?.scale}`)]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Text"}),e.jsx(E,{value:v()?.displayText||"",onChange:a=>te(v()?.id||"",a.target.value),placeholder:"Enter text to display on the banner",className:"w-full"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{variant:"danger",size:"sm",onClick:()=>R(v()?.id||""),children:"Remove Banner Image"})})]})]}),e.jsx("div",{children:e.jsx(B,{onFileSelect:q,accept:"image/*",title:"Upload Banner Image",description:"Drag and drop or click to upload a banner image",maxSize:5,isLoading:N?.contentType==="banner"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Scanner Variations"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[S().length," images"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[re().map(a=>e.jsx(De,{id:a.id,src:a.src,alt:a.alt,scale:a.scale||1,onScaleChange:(t,d)=>I(t,d),onDelete:R},a.id)),e.jsx("div",{className:"border dark:border-gray-700 bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:e.jsx(B,{onFileSelect:ee,accept:"image/*",title:"Add Scanner Variation",description:"Drag and drop or click to upload",maxSize:5,isLoading:N?.contentType==="scanner"})})]}),A()>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("nav",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>L(Math.max(1,U-1)),disabled:U===1,className:`px-3 py-1 rounded ${U===1?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:text-gray-500":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:"Previous"}),Array.from({length:A()},(a,t)=>t+1).map(a=>e.jsx("button",{onClick:()=>L(a),className:`w-8 h-8 rounded flex items-center justify-center ${a===U?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:a},a)),e.jsx("button",{onClick:()=>L(Math.min(A(),U+1)),disabled:U===A(),className:`px-3 py-1 rounded ${U===A()?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:text-gray-500":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:"Next"})]})})]})]})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Template Builder"}),e.jsx(Te,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(C,{onClick:r,children:"Add New Section"}),e.jsx(le,{axis:"y",values:g,onReorder:n,className:"space-y-4",children:g.map(a=>e.jsxs(ne,{value:a,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(E,{value:a.title,onChange:t=>s(a.id,{title:t.target.value}),className:"text-lg font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-800",placeholder:"Section Title"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(z,{label:"Mandatory",checked:a.isMandatory,onChange:t=>s(a.id,{isMandatory:t.target.checked})}),e.jsx(C,{variant:"danger",size:"sm",onClick:()=>c(a.id),children:"Delete Section"})]})]}),e.jsx(V,{value:a.code,onChange:t=>s(a.id,{code:t.target.value}),className:"w-full font-mono text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",rows:5,placeholder:"Enter section code here..."})]},a.id))})]})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Questions"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(C,{onClick:()=>j("text"),children:"Add Text Question"}),e.jsx(C,{onClick:()=>j("choice"),children:"Add Choice Question"}),e.jsx(C,{onClick:()=>j("boolean"),children:"Add Yes/No Question"})]}),e.jsx(P,{mode:"popLayout",children:e.jsx(k.div,{className:"space-y-8",children:o.map(a=>e.jsxs(k.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx(V,{value:a.text,onChange:t=>x(a.id,{text:t.target.value}),className:"w-full text-lg font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",placeholder:"Enter your question..."}),e.jsx(C,{variant:"danger",size:"sm",onClick:()=>u(a.id),className:"ml-4",children:"Delete"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx(z,{label:"Required Question",checked:a.required,onChange:t=>x(a.id,{required:t.target.checked})}),(a.type==="text"||a.type==="boolean")&&e.jsxs(_,{label:"Link to Code Section",value:a.linkedSectionId||"",onChange:t=>x(a.id,{linkedSectionId:t.target.value||void 0}),className:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"",children:"None"}),g.map(t=>e.jsx("option",{value:t.id,children:t.title||`Section ${t.id}`},t.id))]})]}),a.type==="text"&&e.jsx(E,{label:"Placeholder Variable Name",value:a.placeholderVariable||"",onChange:t=>x(a.id,{placeholderVariable:t.target.value}),placeholder:"e.g., {{USER_INPUT}}",className:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 mb-6"}),a.type==="choice"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Answer Options"}),e.jsx(C,{onClick:()=>Y(a.id),children:"Add Option"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(P,{mode:"popLayout",children:a.options?.map(t=>e.jsx(k.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"group border dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(E,{label:"Option Text",value:t.text,onChange:J(a.id,t.id),placeholder:"Enter answer option text",className:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600"}),e.jsxs(_,{label:"Link to Code Section",value:t.linkedSectionId||"",onChange:d=>Z(a.id,t.id)(d),className:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"",children:"None"}),g.map(d=>e.jsx("option",{value:d.id,children:d.title||`Section ${d.id}`},d.id))]}),e.jsx("div",{className:"pt-4",children:t.imageUrl?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:e.jsx("img",{src:t.imagePreview||t.imageUrl,alt:t.text||"Option image",className:"w-full h-full object-contain",style:{transform:`scale(${t.scale||1})`}})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Image Scale (",((t.scale||1)*100).toFixed(0),"%)"]}),e.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:t.scale||1,onChange:H(a.id,t.id),className:"w-full"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{variant:"danger",size:"sm",onClick:()=>X(a.id,t.id),children:"Remove Image"})})]}):e.jsx(B,{onFileSelect:d=>K(a.id,t.id,d),accept:"image/*",title:"Add Answer Image",description:"Drag and drop or click to upload",maxSize:2,variant:"compact",isLoading:N?.questionId===a.id&&N?.optionId===t.id})})]})},t.id))})})]})]},a.id))})})]})]})]}):e.jsx("div",{className:"p-8 text-center text-gray-900 dark:text-white",children:"You don't have permission to access this page."})}export{Ee as default};
