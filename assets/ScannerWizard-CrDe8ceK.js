import{j as c,A as Ke,m as Q}from"./vendor-ui-Bp3seDoC.js";import{a as T,c as Je,r as Be,b as Ie,g as Ze,h as Fe,R as te}from"./vendor-react-Dyhn-Q9i.js";import{m as ce,r as et,B as K,u as tt,a as rt,b as it,T as ue,C as st}from"./Button-wH5AQCJV.js";import{a as Ue,g as Se,H as F,u as nt,b as at,T as ot}from"./index-mwiAmXtJ.js";const lt={hidden:{opacity:0},visible:{opacity:1}},dt={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.2}}},ct=({isOpen:r,onClose:s,title:t,children:e,footer:i,size:a="md",showCloseButton:o=!0})=>{const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[a];return c.jsx(Ke,{mode:"wait",children:r&&c.jsxs(T.Fragment,{children:[c.jsx(Q.div,{variants:lt,initial:"hidden",animate:"visible",exit:"hidden",onClick:s,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),c.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:c.jsxs(Q.div,{variants:dt,initial:"hidden",animate:"visible",exit:"exit",className:`${l} w-full bg-white rounded-lg shadow-xl`,onClick:v=>v.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t}),o&&c.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"px-6 py-4",children:e}),i&&c.jsx("div",{className:"px-6 py-4 border-t bg-gray-50 rounded-b-lg",children:i})]})})]})})},ut=({skippedQuestions:r=new Set,fullTemplateMode:s=!1,fullTemplateCode:t=""})=>{const{state:e}=Ue(),{answers:i,sections:a,questions:o}=e,l=T.useMemo(()=>ce(x=>x.filter(N=>N.isMandatory)),[]),v=T.useMemo(()=>ce((x,N)=>x.find(m=>m.id===N)),[]),y=T.useMemo(()=>ce((x,N)=>x.find(m=>m.id===N)),[]),z=T.useCallback((x,N,m)=>{const p=new RegExp(`{{\\s*${N}\\s*}}`,"g");return x.replace(p,m)},[]),f=T.useCallback(x=>{let N="";const m=new Set;return x.forEach(p=>{N+=`// --- Section: ${p.title} (Mandatory) ---
`,N+=p.code+`

`,m.add(p.id)}),{code:N,includedIds:m}},[]),w=T.useCallback((x,N,m,p,d)=>{let u="";return Object.entries(x).forEach(([g,b])=>{const R=v(N,g);if(!R||d.has(g))return;let n;if(R.type==="choice"&&b?(Array.isArray(b)?b:[b]).forEach(D=>{const P=R.options?.find(E=>E.value===D);P?.linkedSectionId&&(n=P.linkedSectionId)}):(R.type==="text"||R.type==="boolean")&&R.linkedSectionId&&(n=R.linkedSectionId),n&&!p.has(n)){const h=y(m,n);if(h){let D=h.code;R.type==="text"&&R.placeholderVariable&&typeof b=="string"&&(D=z(D,R.placeholderVariable,b)),u+=`// --- Section: ${h.title} (Linked by: ${R.text.substring(0,20)}...) ---
`,u+=D+`

`,p.add(h.id)}}else R.type==="text"&&R.placeholderVariable&&typeof b=="string"&&!n&&(u+=`// User input for "${R.text.substring(0,20)}...": ${b}

`)}),d.size>0&&(u+=`// --- Skipped Questions ---
`,d.forEach(g=>{const b=v(N,g);if(b&&(u+=`// SKIPPED: ${b.text.substring(0,50)}${b.text.length>50?"...":""}
`,b.linkedSectionId)){const R=y(m,b.linkedSectionId);R&&!p.has(R.id)&&(u+=`// Would have included section: ${R.title}
`)}}),u+=`
`),u},[v,y,z]),S=T.useMemo(()=>{if(s&&t)return t;const x=l(a),{code:N,includedIds:m}=f(x),p=w(i,o,a,m,r);return(N+p).trim()||"// No code generated yet. Answer questions or mark sections as mandatory."},[s,t,i,a,o,r,l,f,w]);return c.jsxs("div",{className:"sticky top-4 h-[calc(100vh-2rem)] overflow-hidden rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[c.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Live Code Preview"})}),c.jsx("pre",{className:"p-4 overflow-auto h-[calc(100%-41px)] bg-white dark:bg-gray-900 text-sm text-gray-800 dark:text-gray-200 font-mono",children:c.jsx("code",{children:S})})]})};var Z={exports:{}},he={},pe={exports:{}},fe,ze;function ht(){if(ze)return fe;ze=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return fe=r,fe}var ge,Ne;function pt(){if(Ne)return ge;Ne=1;var r=ht();function s(){}function t(){}return t.resetWarningCache=s,ge=function(){function e(o,l,v,y,z,f){if(f!==r){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function i(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:i,element:e,elementType:e,instanceOf:i,node:e,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:s};return a.PropTypes=a,a},ge}var De;function $e(){return De||(De=1,pe.exports=pt()()),pe.exports}function Xe(r){var s,t,e="";if(typeof r=="string"||typeof r=="number")e+=r;else if(typeof r=="object")if(Array.isArray(r))for(s=0;s<r.length;s++)r[s]&&(t=Xe(r[s]))&&(e&&(e+=" "),e+=t);else for(s in r)r[s]&&(e&&(e+=" "),e+=s);return e}function Re(){for(var r,s,t=0,e="";t<arguments.length;)(r=arguments[t++])&&(s=Xe(r))&&(e&&(e+=" "),e+=s);return e}const ft=Object.freeze(Object.defineProperty({__proto__:null,clsx:Re,default:Re},Symbol.toStringTag,{value:"Module"})),gt=Je(ft);var O={},G={},Pe;function le(){if(Pe)return G;Pe=1,Object.defineProperty(G,"__esModule",{value:!0}),G.dontSetMe=i,G.findInArray=r,G.int=e,G.isFunction=s,G.isNum=t;function r(a,o){for(let l=0,v=a.length;l<v;l++)if(o.apply(o,[a[l],l,a]))return a[l]}function s(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Function]"}function t(a){return typeof a=="number"&&!isNaN(a)}function e(a){return parseInt(a,10)}function i(a,o,l){if(a[o])return new Error("Invalid prop ".concat(o," passed to ").concat(l," - do not set this, set it on the child."))}return G}var V={},Ce;function mt(){if(Ce)return V;Ce=1,Object.defineProperty(V,"__esModule",{value:!0}),V.browserPrefixToKey=t,V.browserPrefixToStyle=e,V.default=void 0,V.getPrefix=s;const r=["Moz","Webkit","O","ms"];function s(){var a;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const l=(a=window.document)===null||a===void 0||(a=a.documentElement)===null||a===void 0?void 0:a.style;if(!l||o in l)return"";for(let v=0;v<r.length;v++)if(t(o,r[v])in l)return r[v];return""}function t(a,o){return o?"".concat(o).concat(i(a)):a}function e(a,o){return o?"-".concat(o.toLowerCase(),"-").concat(a):a}function i(a){let o="",l=!0;for(let v=0;v<a.length;v++)l?(o+=a[v].toUpperCase(),l=!1):a[v]==="-"?l=!0:o+=a[v];return o}return V.default=s(),V}var Te;function be(){if(Te)return O;Te=1,Object.defineProperty(O,"__esModule",{value:!0}),O.addClassName=b,O.addEvent=l,O.addUserSelectStyles=u,O.createCSSTransform=x,O.createSVGTransform=N,O.getTouch=p,O.getTouchIdentifier=d,O.getTranslation=m,O.innerHeight=f,O.innerWidth=w,O.matchesSelector=a,O.matchesSelectorAndParentsTo=o,O.offsetXYFromParent=S,O.outerHeight=y,O.outerWidth=z,O.removeClassName=R,O.removeEvent=v,O.removeUserSelectStyles=g;var r=le(),s=e(mt());function t(n){if(typeof WeakMap!="function")return null;var h=new WeakMap,D=new WeakMap;return(t=function(P){return P?D:h})(n)}function e(n,h){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var D=t(h);if(D&&D.has(n))return D.get(n);var P={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in n)if(j!=="default"&&Object.prototype.hasOwnProperty.call(n,j)){var k=E?Object.getOwnPropertyDescriptor(n,j):null;k&&(k.get||k.set)?Object.defineProperty(P,j,k):P[j]=n[j]}return P.default=n,D&&D.set(n,P),P}let i="";function a(n,h){return i||(i=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(D){return(0,r.isFunction)(n[D])})),(0,r.isFunction)(n[i])?n[i](h):!1}function o(n,h,D){let P=n;do{if(a(P,h))return!0;if(P===D)return!1;P=P.parentNode}while(P);return!1}function l(n,h,D,P){if(!n)return;const E={capture:!0,...P};n.addEventListener?n.addEventListener(h,D,E):n.attachEvent?n.attachEvent("on"+h,D):n["on"+h]=D}function v(n,h,D,P){if(!n)return;const E={capture:!0,...P};n.removeEventListener?n.removeEventListener(h,D,E):n.detachEvent?n.detachEvent("on"+h,D):n["on"+h]=null}function y(n){let h=n.clientHeight;const D=n.ownerDocument.defaultView.getComputedStyle(n);return h+=(0,r.int)(D.borderTopWidth),h+=(0,r.int)(D.borderBottomWidth),h}function z(n){let h=n.clientWidth;const D=n.ownerDocument.defaultView.getComputedStyle(n);return h+=(0,r.int)(D.borderLeftWidth),h+=(0,r.int)(D.borderRightWidth),h}function f(n){let h=n.clientHeight;const D=n.ownerDocument.defaultView.getComputedStyle(n);return h-=(0,r.int)(D.paddingTop),h-=(0,r.int)(D.paddingBottom),h}function w(n){let h=n.clientWidth;const D=n.ownerDocument.defaultView.getComputedStyle(n);return h-=(0,r.int)(D.paddingLeft),h-=(0,r.int)(D.paddingRight),h}function S(n,h,D){const E=h===h.ownerDocument.body?{left:0,top:0}:h.getBoundingClientRect(),j=(n.clientX+h.scrollLeft-E.left)/D,k=(n.clientY+h.scrollTop-E.top)/D;return{x:j,y:k}}function x(n,h){const D=m(n,h,"px");return{[(0,s.browserPrefixToKey)("transform",s.default)]:D}}function N(n,h){return m(n,h,"")}function m(n,h,D){let{x:P,y:E}=n,j="translate(".concat(P).concat(D,",").concat(E).concat(D,")");if(h){const k="".concat(typeof h.x=="string"?h.x:h.x+D),_="".concat(typeof h.y=="string"?h.y:h.y+D);j="translate(".concat(k,", ").concat(_,")")+j}return j}function p(n,h){return n.targetTouches&&(0,r.findInArray)(n.targetTouches,D=>h===D.identifier)||n.changedTouches&&(0,r.findInArray)(n.changedTouches,D=>h===D.identifier)}function d(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function u(n){if(!n)return;let h=n.getElementById("react-draggable-style-el");h||(h=n.createElement("style"),h.type="text/css",h.id="react-draggable-style-el",h.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,h.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(h)),n.body&&b(n.body,"react-draggable-transparent-selection")}function g(n){if(n)try{if(n.body&&R(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const h=(n.defaultView||window).getSelection();h&&h.type!=="Caret"&&h.removeAllRanges()}}catch{}}function b(n,h){n.classList?n.classList.add(h):n.className.match(new RegExp("(?:^|\\s)".concat(h,"(?!\\S)")))||(n.className+=" ".concat(h))}function R(n,h){n.classList?n.classList.remove(h):n.className=n.className.replace(new RegExp("(?:^|\\s)".concat(h,"(?!\\S)"),"g"),"")}return O}var $={},je;function Ye(){if(je)return $;je=1,Object.defineProperty($,"__esModule",{value:!0}),$.canDragX=i,$.canDragY=a,$.createCoreData=l,$.createDraggableData=v,$.getBoundPosition=t,$.getControlPosition=o,$.snapToGrid=e;var r=le(),s=be();function t(f,w,S){if(!f.props.bounds)return[w,S];let{bounds:x}=f.props;x=typeof x=="string"?x:y(x);const N=z(f);if(typeof x=="string"){const{ownerDocument:m}=N,p=m.defaultView;let d;if(x==="parent"?d=N.parentNode:d=m.querySelector(x),!(d instanceof p.HTMLElement))throw new Error('Bounds selector "'+x+'" could not find an element.');const u=d,g=p.getComputedStyle(N),b=p.getComputedStyle(u);x={left:-N.offsetLeft+(0,r.int)(b.paddingLeft)+(0,r.int)(g.marginLeft),top:-N.offsetTop+(0,r.int)(b.paddingTop)+(0,r.int)(g.marginTop),right:(0,s.innerWidth)(u)-(0,s.outerWidth)(N)-N.offsetLeft+(0,r.int)(b.paddingRight)-(0,r.int)(g.marginRight),bottom:(0,s.innerHeight)(u)-(0,s.outerHeight)(N)-N.offsetTop+(0,r.int)(b.paddingBottom)-(0,r.int)(g.marginBottom)}}return(0,r.isNum)(x.right)&&(w=Math.min(w,x.right)),(0,r.isNum)(x.bottom)&&(S=Math.min(S,x.bottom)),(0,r.isNum)(x.left)&&(w=Math.max(w,x.left)),(0,r.isNum)(x.top)&&(S=Math.max(S,x.top)),[w,S]}function e(f,w,S){const x=Math.round(w/f[0])*f[0],N=Math.round(S/f[1])*f[1];return[x,N]}function i(f){return f.props.axis==="both"||f.props.axis==="x"}function a(f){return f.props.axis==="both"||f.props.axis==="y"}function o(f,w,S){const x=typeof w=="number"?(0,s.getTouch)(f,w):null;if(typeof w=="number"&&!x)return null;const N=z(S),m=S.props.offsetParent||N.offsetParent||N.ownerDocument.body;return(0,s.offsetXYFromParent)(x||f,m,S.props.scale)}function l(f,w,S){const x=!(0,r.isNum)(f.lastX),N=z(f);return x?{node:N,deltaX:0,deltaY:0,lastX:w,lastY:S,x:w,y:S}:{node:N,deltaX:w-f.lastX,deltaY:S-f.lastY,lastX:f.lastX,lastY:f.lastY,x:w,y:S}}function v(f,w){const S=f.props.scale;return{node:w.node,x:f.state.x+w.deltaX/S,y:f.state.y+w.deltaY/S,deltaX:w.deltaX/S,deltaY:w.deltaY/S,lastX:f.state.x,lastY:f.state.y}}function y(f){return{left:f.left,top:f.top,right:f.right,bottom:f.bottom}}function z(f){const w=f.findDOMNode();if(!w)throw new Error("<DraggableCore>: Unmounted during event!");return w}return $}var ee={},re={},Ee;function qe(){if(Ee)return re;Ee=1,Object.defineProperty(re,"__esModule",{value:!0}),re.default=r;function r(){}return re}var Me;function vt(){if(Me)return ee;Me=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.default=void 0;var r=y(Be()),s=l($e()),t=l(Ie()),e=be(),i=Ye(),a=le(),o=l(qe());function l(m){return m&&m.__esModule?m:{default:m}}function v(m){if(typeof WeakMap!="function")return null;var p=new WeakMap,d=new WeakMap;return(v=function(u){return u?d:p})(m)}function y(m,p){if(m&&m.__esModule)return m;if(m===null||typeof m!="object"&&typeof m!="function")return{default:m};var d=v(p);if(d&&d.has(m))return d.get(m);var u={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in m)if(b!=="default"&&Object.prototype.hasOwnProperty.call(m,b)){var R=g?Object.getOwnPropertyDescriptor(m,b):null;R&&(R.get||R.set)?Object.defineProperty(u,b,R):u[b]=m[b]}return u.default=m,d&&d.set(m,u),u}function z(m,p,d){return p=f(p),p in m?Object.defineProperty(m,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):m[p]=d,m}function f(m){var p=w(m,"string");return typeof p=="symbol"?p:String(p)}function w(m,p){if(typeof m!="object"||m===null)return m;var d=m[Symbol.toPrimitive];if(d!==void 0){var u=d.call(m,p);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(m)}const S={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let x=S.mouse,N=class extends r.Component{constructor(){super(...arguments),z(this,"dragging",!1),z(this,"lastX",NaN),z(this,"lastY",NaN),z(this,"touchIdentifier",null),z(this,"mounted",!1),z(this,"handleDragStart",p=>{if(this.props.onMouseDown(p),!this.props.allowAnyClick&&typeof p.button=="number"&&p.button!==0)return!1;const d=this.findDOMNode();if(!d||!d.ownerDocument||!d.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:u}=d;if(this.props.disabled||!(p.target instanceof u.defaultView.Node)||this.props.handle&&!(0,e.matchesSelectorAndParentsTo)(p.target,this.props.handle,d)||this.props.cancel&&(0,e.matchesSelectorAndParentsTo)(p.target,this.props.cancel,d))return;p.type==="touchstart"&&p.preventDefault();const g=(0,e.getTouchIdentifier)(p);this.touchIdentifier=g;const b=(0,i.getControlPosition)(p,g,this);if(b==null)return;const{x:R,y:n}=b,h=(0,i.createCoreData)(this,R,n);(0,o.default)("DraggableCore: handleDragStart: %j",h),(0,o.default)("calling",this.props.onStart),!(this.props.onStart(p,h)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,e.addUserSelectStyles)(u),this.dragging=!0,this.lastX=R,this.lastY=n,(0,e.addEvent)(u,x.move,this.handleDrag),(0,e.addEvent)(u,x.stop,this.handleDragStop))}),z(this,"handleDrag",p=>{const d=(0,i.getControlPosition)(p,this.touchIdentifier,this);if(d==null)return;let{x:u,y:g}=d;if(Array.isArray(this.props.grid)){let n=u-this.lastX,h=g-this.lastY;if([n,h]=(0,i.snapToGrid)(this.props.grid,n,h),!n&&!h)return;u=this.lastX+n,g=this.lastY+h}const b=(0,i.createCoreData)(this,u,g);if((0,o.default)("DraggableCore: handleDrag: %j",b),this.props.onDrag(p,b)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const h=document.createEvent("MouseEvents");h.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(h)}return}this.lastX=u,this.lastY=g}),z(this,"handleDragStop",p=>{if(!this.dragging)return;const d=(0,i.getControlPosition)(p,this.touchIdentifier,this);if(d==null)return;let{x:u,y:g}=d;if(Array.isArray(this.props.grid)){let h=u-this.lastX||0,D=g-this.lastY||0;[h,D]=(0,i.snapToGrid)(this.props.grid,h,D),u=this.lastX+h,g=this.lastY+D}const b=(0,i.createCoreData)(this,u,g);if(this.props.onStop(p,b)===!1||this.mounted===!1)return!1;const n=this.findDOMNode();n&&this.props.enableUserSelectHack&&(0,e.removeUserSelectStyles)(n.ownerDocument),(0,o.default)("DraggableCore: handleDragStop: %j",b),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,n&&((0,o.default)("DraggableCore: Removing handlers"),(0,e.removeEvent)(n.ownerDocument,x.move,this.handleDrag),(0,e.removeEvent)(n.ownerDocument,x.stop,this.handleDragStop))}),z(this,"onMouseDown",p=>(x=S.mouse,this.handleDragStart(p))),z(this,"onMouseUp",p=>(x=S.mouse,this.handleDragStop(p))),z(this,"onTouchStart",p=>(x=S.touch,this.handleDragStart(p))),z(this,"onTouchEnd",p=>(x=S.touch,this.handleDragStop(p)))}componentDidMount(){this.mounted=!0;const p=this.findDOMNode();p&&(0,e.addEvent)(p,S.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const p=this.findDOMNode();if(p){const{ownerDocument:d}=p;(0,e.removeEvent)(d,S.mouse.move,this.handleDrag),(0,e.removeEvent)(d,S.touch.move,this.handleDrag),(0,e.removeEvent)(d,S.mouse.stop,this.handleDragStop),(0,e.removeEvent)(d,S.touch.stop,this.handleDragStop),(0,e.removeEvent)(p,S.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,e.removeUserSelectStyles)(d)}}findDOMNode(){var p,d;return(p=this.props)!==null&&p!==void 0&&p.nodeRef?(d=this.props)===null||d===void 0||(d=d.nodeRef)===null||d===void 0?void 0:d.current:t.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return ee.default=N,z(N,"displayName","DraggableCore"),z(N,"propTypes",{allowAnyClick:s.default.bool,children:s.default.node.isRequired,disabled:s.default.bool,enableUserSelectHack:s.default.bool,offsetParent:function(m,p){if(m[p]&&m[p].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:s.default.arrayOf(s.default.number),handle:s.default.string,cancel:s.default.string,nodeRef:s.default.object,onStart:s.default.func,onDrag:s.default.func,onStop:s.default.func,onMouseDown:s.default.func,scale:s.default.number,className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),z(N,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),ee}var ke;function yt(){return ke||(ke=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraggableCore",{enumerable:!0,get:function(){return v.default}}),r.default=void 0;var s=w(Be()),t=z($e()),e=z(Ie()),i=z(gt),a=be(),o=Ye(),l=le(),v=z(vt()),y=z(qe());function z(d){return d&&d.__esModule?d:{default:d}}function f(d){if(typeof WeakMap!="function")return null;var u=new WeakMap,g=new WeakMap;return(f=function(b){return b?g:u})(d)}function w(d,u){if(d&&d.__esModule)return d;if(d===null||typeof d!="object"&&typeof d!="function")return{default:d};var g=f(u);if(g&&g.has(d))return g.get(d);var b={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in d)if(n!=="default"&&Object.prototype.hasOwnProperty.call(d,n)){var h=R?Object.getOwnPropertyDescriptor(d,n):null;h&&(h.get||h.set)?Object.defineProperty(b,n,h):b[n]=d[n]}return b.default=d,g&&g.set(d,b),b}function S(){return S=Object.assign?Object.assign.bind():function(d){for(var u=1;u<arguments.length;u++){var g=arguments[u];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(d[b]=g[b])}return d},S.apply(this,arguments)}function x(d,u,g){return u=N(u),u in d?Object.defineProperty(d,u,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[u]=g,d}function N(d){var u=m(d,"string");return typeof u=="symbol"?u:String(u)}function m(d,u){if(typeof d!="object"||d===null)return d;var g=d[Symbol.toPrimitive];if(g!==void 0){var b=g.call(d,u);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(d)}class p extends s.Component{static getDerivedStateFromProps(u,g){let{position:b}=u,{prevPropsPosition:R}=g;return b&&(!R||b.x!==R.x||b.y!==R.y)?((0,y.default)("Draggable: getDerivedStateFromProps %j",{position:b,prevPropsPosition:R}),{x:b.x,y:b.y,prevPropsPosition:{...b}}):null}constructor(u){super(u),x(this,"onDragStart",(g,b)=>{if((0,y.default)("Draggable: onDragStart: %j",b),this.props.onStart(g,(0,o.createDraggableData)(this,b))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(g,b)=>{if(!this.state.dragging)return!1;(0,y.default)("Draggable: onDrag: %j",b);const R=(0,o.createDraggableData)(this,b),n={x:R.x,y:R.y,slackX:0,slackY:0};if(this.props.bounds){const{x:D,y:P}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;const[E,j]=(0,o.getBoundPosition)(this,n.x,n.y);n.x=E,n.y=j,n.slackX=this.state.slackX+(D-n.x),n.slackY=this.state.slackY+(P-n.y),R.x=n.x,R.y=n.y,R.deltaX=n.x-this.state.x,R.deltaY=n.y-this.state.y}if(this.props.onDrag(g,R)===!1)return!1;this.setState(n)}),x(this,"onDragStop",(g,b)=>{if(!this.state.dragging||this.props.onStop(g,(0,o.createDraggableData)(this,b))===!1)return!1;(0,y.default)("Draggable: onDragStop: %j",b);const n={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:D,y:P}=this.props.position;n.x=D,n.y=P}this.setState(n)}),this.state={dragging:!1,dragged:!1,x:u.position?u.position.x:u.defaultPosition.x,y:u.position?u.position.y:u.defaultPosition.y,prevPropsPosition:{...u.position},slackX:0,slackY:0,isElementSVG:!1},u.position&&!(u.onDrag||u.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var u,g;return(u=(g=this.props)===null||g===void 0||(g=g.nodeRef)===null||g===void 0?void 0:g.current)!==null&&u!==void 0?u:e.default.findDOMNode(this)}render(){const{axis:u,bounds:g,children:b,defaultPosition:R,defaultClassName:n,defaultClassNameDragging:h,defaultClassNameDragged:D,position:P,positionOffset:E,scale:j,...k}=this.props;let _={},B=null;const U=!!!P||this.state.dragging,Y=P||R,q={x:(0,o.canDragX)(this)&&U?this.state.x:Y.x,y:(0,o.canDragY)(this)&&U?this.state.y:Y.y};this.state.isElementSVG?B=(0,a.createSVGTransform)(q,E):_=(0,a.createCSSTransform)(q,E);const I=(0,i.default)(b.props.className||"",n,{[h]:this.state.dragging,[D]:this.state.dragged});return s.createElement(v.default,S({},k,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),s.cloneElement(s.Children.only(b),{className:I,style:{...b.props.style,..._},transform:B}))}}r.default=p,x(p,"displayName","Draggable"),x(p,"propTypes",{...v.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),x(p,"defaultProps",{...v.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(he)),he}var _e;function bt(){if(_e)return Z.exports;_e=1;const{default:r,DraggableCore:s}=yt();return Z.exports=r,Z.exports.default=r,Z.exports.DraggableCore=s,Z.exports}var xt=bt();const wt=Ze(xt);var H=function(){return H=Object.assign||function(r){for(var s,t=1,e=arguments.length;t<e;t++){s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},H.apply(this,arguments)},We={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Oe={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},ie={width:"20px",height:"20px",position:"absolute",zIndex:1},St={top:H(H({},We),{top:"-5px"}),right:H(H({},Oe),{left:void 0,right:"-5px"}),bottom:H(H({},We),{top:void 0,bottom:"-5px"}),left:H(H({},Oe),{left:"-5px"}),topRight:H(H({},ie),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:H(H({},ie),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:H(H({},ie),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:H(H({},ie),{left:"-10px",top:"-10px",cursor:"nw-resize"})},zt=T.memo(function(r){var s=r.onResizeStart,t=r.direction,e=r.children,i=r.replaceStyles,a=r.className,o=T.useCallback(function(y){s(y,t)},[s,t]),l=T.useCallback(function(y){s(y,t)},[s,t]),v=T.useMemo(function(){return H(H({position:"absolute",userSelect:"none"},St[t]),i??{})},[i,t]);return c.jsx("div",{className:a||void 0,style:v,onMouseDown:o,onTouchStart:l,children:e})}),Nt=function(){var r=function(s,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])},r(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),X=function(){return X=Object.assign||function(r){for(var s,t=1,e=arguments.length;t<e;t++){s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},X.apply(this,arguments)},Dt={width:"auto",height:"auto"},se=function(r,s,t){return Math.max(Math.min(r,t),s)},He=function(r,s,t){var e=Math.round(r/s);return e*s+t*(e-1)},J=function(r,s){return new RegExp(r,"i").test(s)},ne=function(r){return!!(r.touches&&r.touches.length)},Rt=function(r){return!!((r.clientX||r.clientX===0)&&(r.clientY||r.clientY===0))},Ae=function(r,s,t){t===void 0&&(t=0);var e=s.reduce(function(a,o,l){return Math.abs(o-r)<Math.abs(s[a]-r)?l:a},0),i=Math.abs(s[e]-r);return t===0||i<t?s[e]:r},me=function(r){return r=r.toString(),r==="auto"||r.endsWith("px")||r.endsWith("%")||r.endsWith("vh")||r.endsWith("vw")||r.endsWith("vmax")||r.endsWith("vmin")?r:"".concat(r,"px")},ae=function(r,s,t,e){if(r&&typeof r=="string"){if(r.endsWith("px"))return Number(r.replace("px",""));if(r.endsWith("%")){var i=Number(r.replace("%",""))/100;return s*i}if(r.endsWith("vw")){var i=Number(r.replace("vw",""))/100;return t*i}if(r.endsWith("vh")){var i=Number(r.replace("vh",""))/100;return e*i}}return r},Pt=function(r,s,t,e,i,a,o){return e=ae(e,r.width,s,t),i=ae(i,r.height,s,t),a=ae(a,r.width,s,t),o=ae(o,r.height,s,t),{maxWidth:typeof e>"u"?void 0:Number(e),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof a>"u"?void 0:Number(a),minHeight:typeof o>"u"?void 0:Number(o)}},Ct=function(r){return Array.isArray(r)?r:[r,r]},Tt=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Le="__resizable_base__",jt=function(r){Nt(s,r);function s(t){var e,i,a,o,l=r.call(this,t)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var v=l.parentNode;if(!v)return null;var y=l.window.document.createElement("div");return y.style.width="100%",y.style.height="100%",y.style.position="absolute",y.style.transform="scale(0, 0)",y.style.left="0",y.style.flex="0 0 100%",y.classList?y.classList.add(Le):y.className+=Le,v.appendChild(y),y},l.removeBase=function(v){var y=l.parentNode;y&&y.removeChild(v)},l.state={isResizing:!1,width:(i=(e=l.propsSize)===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:"auto",height:(o=(a=l.propsSize)===null||a===void 0?void 0:a.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(s.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Dt},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){var t=0,e=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,a=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,e=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:a,this.resizable.style.position=o}return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sizeStyle",{get:function(){var t=this,e=this.props.size,i=function(l){var v;if(typeof t.state[l]>"u"||t.state[l]==="auto")return"auto";if(t.propsSize&&t.propsSize[l]&&(!((v=t.propsSize[l])===null||v===void 0)&&v.toString().endsWith("%"))){if(t.state[l].toString().endsWith("%"))return t.state[l].toString();var y=t.getParentSize(),z=Number(t.state[l].toString().replace("px","")),f=z/y[l]*100;return"".concat(f,"%")}return me(t.state[l])},a=e&&typeof e.width<"u"&&!this.state.isResizing?me(e.width):i("width"),o=e&&typeof e.height<"u"&&!this.state.isResizing?me(e.height):i("height");return{width:a,height:o}},enumerable:!1,configurable:!0}),s.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var e=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var a={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=i),this.removeBase(t),a},s.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},s.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},s.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},s.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},s.prototype.createSizeForCssProperty=function(t,e){var i=this.propsSize&&this.propsSize[e];return this.state[e]==="auto"&&this.state.original[e]===t&&(typeof i>"u"||i==="auto")?"auto":t},s.prototype.calculateNewMaxFromBoundary=function(t,e){var i=this.props.boundsByDirection,a=this.state.direction,o=i&&J("left",a),l=i&&J("top",a),v,y;if(this.props.bounds==="parent"){var z=this.parentNode;z&&(v=o?this.resizableRight-this.parentLeft:z.offsetWidth+(this.parentLeft-this.resizableLeft),y=l?this.resizableBottom-this.parentTop:z.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(v=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,y=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(v=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),y=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return v&&Number.isFinite(v)&&(t=t&&t<v?t:v),y&&Number.isFinite(y)&&(e=e&&e<y?e:y),{maxWidth:t,maxHeight:e}},s.prototype.calculateNewSizeFromDirection=function(t,e){var i=this.props.scale||1,a=Ct(this.props.resizeRatio||1),o=a[0],l=a[1],v=this.state,y=v.direction,z=v.original,f=this.props,w=f.lockAspectRatio,S=f.lockAspectRatioExtraHeight,x=f.lockAspectRatioExtraWidth,N=z.width,m=z.height,p=S||0,d=x||0;return J("right",y)&&(N=z.width+(t-z.x)*o/i,w&&(m=(N-d)/this.ratio+p)),J("left",y)&&(N=z.width-(t-z.x)*o/i,w&&(m=(N-d)/this.ratio+p)),J("bottom",y)&&(m=z.height+(e-z.y)*l/i,w&&(N=(m-p)*this.ratio+d)),J("top",y)&&(m=z.height-(e-z.y)*l/i,w&&(N=(m-p)*this.ratio+d)),{newWidth:N,newHeight:m}},s.prototype.calculateNewSizeFromAspectRatio=function(t,e,i,a){var o=this.props,l=o.lockAspectRatio,v=o.lockAspectRatioExtraHeight,y=o.lockAspectRatioExtraWidth,z=typeof a.width>"u"?10:a.width,f=typeof i.width>"u"||i.width<0?t:i.width,w=typeof a.height>"u"?10:a.height,S=typeof i.height>"u"||i.height<0?e:i.height,x=v||0,N=y||0;if(l){var m=(w-x)*this.ratio+N,p=(S-x)*this.ratio+N,d=(z-N)/this.ratio+x,u=(f-N)/this.ratio+x,g=Math.max(z,m),b=Math.min(f,p),R=Math.max(w,d),n=Math.min(S,u);t=se(t,g,b),e=se(e,R,n)}else t=se(t,z,f),e=se(e,w,S);return{newWidth:t,newHeight:e}},s.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var e=this.parentNode;if(e){var i=e.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var a=this.props.bounds.getBoundingClientRect();this.targetLeft=a.left*t,this.targetTop=a.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),l=o.left,v=o.top,y=o.right,z=o.bottom;this.resizableLeft=l*t,this.resizableRight=y*t,this.resizableTop=v*t,this.resizableBottom=z*t}},s.prototype.onResizeStart=function(t,e){if(!(!this.resizable||!this.window)){var i=0,a=0;if(t.nativeEvent&&Rt(t.nativeEvent)?(i=t.nativeEvent.clientX,a=t.nativeEvent.clientY):t.nativeEvent&&ne(t.nativeEvent)&&(i=t.nativeEvent.touches[0].clientX,a=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(t,e,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,v=this.window.getComputedStyle(this.resizable);if(v.flexBasis!=="auto"){var y=this.parentNode;if(y){var z=this.window.getComputedStyle(y).flexDirection;this.flexDir=z.startsWith("row")?"row":"column",l=v.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var f={original:{x:i,y:a,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:X(X({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:e,flexBasis:l};this.setState(f)}},s.prototype.onMouseMove=function(t){var e=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&ne(t))try{t.preventDefault(),t.stopPropagation()}catch{}var i=this.props,a=i.maxWidth,o=i.maxHeight,l=i.minWidth,v=i.minHeight,y=ne(t)?t.touches[0].clientX:t.clientX,z=ne(t)?t.touches[0].clientY:t.clientY,f=this.state,w=f.direction,S=f.original,x=f.width,N=f.height,m=this.getParentSize(),p=Pt(m,this.window.innerWidth,this.window.innerHeight,a,o,l,v);a=p.maxWidth,o=p.maxHeight,l=p.minWidth,v=p.minHeight;var d=this.calculateNewSizeFromDirection(y,z),u=d.newHeight,g=d.newWidth,b=this.calculateNewMaxFromBoundary(a,o);this.props.snap&&this.props.snap.x&&(g=Ae(g,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(u=Ae(u,this.props.snap.y,this.props.snapGap));var R=this.calculateNewSizeFromAspectRatio(g,u,{width:b.maxWidth,height:b.maxHeight},{width:l,height:v});if(g=R.newWidth,u=R.newHeight,this.props.grid){var n=He(g,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),h=He(u,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),D=this.props.snapGap||0,P=D===0||Math.abs(n-g)<=D?n:g,E=D===0||Math.abs(h-u)<=D?h:u;g=P,u=E}var j={width:g-S.width,height:u-S.height};if(this.delta=j,x&&typeof x=="string"){if(x.endsWith("%")){var k=g/m.width*100;g="".concat(k,"%")}else if(x.endsWith("vw")){var _=g/this.window.innerWidth*100;g="".concat(_,"vw")}else if(x.endsWith("vh")){var B=g/this.window.innerHeight*100;g="".concat(B,"vh")}}if(N&&typeof N=="string"){if(N.endsWith("%")){var k=u/m.height*100;u="".concat(k,"%")}else if(N.endsWith("vw")){var _=u/this.window.innerWidth*100;u="".concat(_,"vw")}else if(N.endsWith("vh")){var B=u/this.window.innerHeight*100;u="".concat(B,"vh")}}var L={width:this.createSizeForCssProperty(g,"width"),height:this.createSizeForCssProperty(u,"height")};this.flexDir==="row"?L.flexBasis=L.width:this.flexDir==="column"&&(L.flexBasis=L.height);var U=this.state.width!==L.width,Y=this.state.height!==L.height,q=this.state.flexBasis!==L.flexBasis,I=U||Y||q;I&&Fe.flushSync(function(){e.setState(L)}),this.props.onResize&&I&&this.props.onResize(t,w,this.resizable,j)}},s.prototype.onMouseUp=function(t){var e,i,a=this.state,o=a.isResizing,l=a.direction;a.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,l,this.resizable,this.delta),this.props.size&&this.setState({width:(e=this.props.size.width)!==null&&e!==void 0?e:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:X(X({},this.state.backgroundStyle),{cursor:"auto"})}))},s.prototype.updateSize=function(t){var e,i;this.setState({width:(e=t.width)!==null&&e!==void 0?e:"auto",height:(i=t.height)!==null&&i!==void 0?i:"auto"})},s.prototype.renderResizer=function(){var t=this,e=this.props,i=e.enable,a=e.handleStyles,o=e.handleClasses,l=e.handleWrapperStyle,v=e.handleWrapperClass,y=e.handleComponent;if(!i)return null;var z=Object.keys(i).map(function(f){return i[f]!==!1?c.jsx(zt,{direction:f,onResizeStart:t.onResizeStart,replaceStyles:a&&a[f],className:o&&o[f],children:y&&y[f]?y[f]:null},f):null});return c.jsx("div",{className:v,style:l,children:z})},s.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce(function(o,l){return Tt.indexOf(l)!==-1||(o[l]=t.props[l]),o},{}),i=X(X(X({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var a=this.props.as||"div";return c.jsxs(a,X({style:i,className:this.props.className},e,{ref:function(o){o&&(t.resizable=o)},children:[this.state.isResizing&&c.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},s.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},s}(T.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ve=function(r,s){return ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ve(r,s)};function Et(r,s){ve(r,s);function t(){this.constructor=r}r.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}var A=function(){return A=Object.assign||function(s){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},A.apply(this,arguments)};function Mt(r,s){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&s.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(r);i<e.length;i++)s.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(r,e[i])&&(t[e[i]]=r[e[i]]);return t}var kt={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},_t=function(r){return{bottom:r,bottomLeft:r,bottomRight:r,left:r,right:r,top:r,topLeft:r,topRight:r}},Wt=function(r){Et(s,r);function s(t){var e=r.call(this,t)||this;return e.resizingPosition={x:0,y:0},e.offsetFromParent={left:0,top:0},e.resizableElement={current:null},e.originalPosition={x:0,y:0},e.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},e.onResizeStart=e.onResizeStart.bind(e),e.onResize=e.onResize.bind(e),e.onResizeStop=e.onResizeStop.bind(e),e.onDragStart=e.onDragStart.bind(e),e.onDrag=e.onDrag.bind(e),e.onDragStop=e.onDragStop.bind(e),e.getMaxSizesFromProps=e.getMaxSizesFromProps.bind(e),e}return s.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,e=t.left,i=t.top,a=this.getDraggablePosition(),o=a.x,l=a.y;this.draggable.setState({x:o-e,y:l-i}),this.forceUpdate()},s.prototype.getDraggablePosition=function(){var t=this.draggable.state,e=t.x,i=t.y;return{x:e,y:i}},s.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},s.prototype.getParentSize=function(){return this.resizable.getParentSize()},s.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,e=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:e}},s.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},s.prototype.getOffsetHeight=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/e;case"body":return document.body.offsetHeight/e;default:return t.offsetHeight}},s.prototype.getOffsetWidth=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/e;case"body":return document.body.offsetWidth/e;default:return t.offsetWidth}},s.prototype.onDragStart=function(t,e){this.props.onDragStart&&this.props.onDragStart(t,e);var i=this.getDraggablePosition();if(this.originalPosition=i,!!this.props.bounds){var a=this.getParent(),o=this.props.scale,l;if(this.props.bounds==="parent")l=a;else if(this.props.bounds==="body"){var v=a.getBoundingClientRect(),y=v.left,z=v.top,f=document.body.getBoundingClientRect(),w=-(y-a.offsetLeft*o-f.left)/o,S=-(z-a.offsetTop*o-f.top)/o,x=(document.body.offsetWidth-this.resizable.size.width*o)/o+w,N=(document.body.offsetHeight-this.resizable.size.height*o)/o+S;return this.setState({bounds:{top:S,right:x,bottom:N,left:w}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var m=a.getBoundingClientRect(),p=m.left,d=m.top,u=-(p-a.offsetLeft*o)/o,g=-(d-a.offsetTop*o)/o,x=(window.innerWidth-this.resizable.size.width*o)/o+u,N=(window.innerHeight-this.resizable.size.height*o)/o+g;return this.setState({bounds:{top:g,right:x,bottom:N,left:u}})}else typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(a instanceof HTMLElement))){var b=l.getBoundingClientRect(),R=b.left,n=b.top,h=a.getBoundingClientRect(),D=h.left,P=h.top,E=(R-D)/o,j=n-P;if(this.resizable){this.updateOffsetFromParent();var k=this.offsetFromParent;this.setState({bounds:{top:j-k.top,right:E+(l.offsetWidth-this.resizable.size.width)-k.left/o,bottom:j+(l.offsetHeight-this.resizable.size.height)-k.top,left:E-k.left/o}})}}}},s.prototype.onDrag=function(t,e){if(this.props.onDrag){var i=this.offsetFromParent,a=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,A(A({},e),{x:e.x+a,y:e.y+o}));if(this.props.dragAxis==="x")return this.props.onDrag(t,A(A({},e),{x:e.x+a,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,A(A({},e),{x:this.originalPosition.x+a,y:e.y+o,deltaX:0}))}},s.prototype.onDragStop=function(t,e){if(this.props.onDragStop){var i=this.offsetFromParent,a=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,A(A({},e),{x:e.x+a,y:e.y+o}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,A(A({},e),{x:e.x+a,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,A(A({},e),{x:this.originalPosition.x+a,y:e.y+o,deltaX:0}))}},s.prototype.onResizeStart=function(t,e,i){t.stopPropagation(),this.setState({resizing:!0});var a=this.props.scale,o=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+o.left,y:l.y+o.top},this.originalPosition=l,this.props.bounds){var v=this.getParent(),y=void 0;this.props.bounds==="parent"?y=v:this.props.bounds==="body"?y=document.body:this.props.bounds==="window"?y=window:typeof this.props.bounds=="string"?y=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(y=this.props.bounds);var z=this.getSelfElement();if(z instanceof Element&&(y instanceof HTMLElement||y===window)&&v instanceof HTMLElement){var f=this.getMaxSizesFromProps(),w=f.maxWidth,S=f.maxHeight,x=this.getParentSize();if(w&&typeof w=="string")if(w.endsWith("%")){var N=Number(w.replace("%",""))/100;w=x.width*N}else w.endsWith("px")&&(w=Number(w.replace("px","")));if(S&&typeof S=="string")if(S.endsWith("%")){var N=Number(S.replace("%",""))/100;S=x.height*N}else S.endsWith("px")&&(S=Number(S.replace("px","")));var m=z.getBoundingClientRect(),p=m.left,d=m.top,u=this.props.bounds==="window"?{left:0,top:0}:y.getBoundingClientRect(),g=u.left,b=u.top,R=this.getOffsetWidth(y),n=this.getOffsetHeight(y),h=e.toLowerCase().endsWith("left"),D=e.toLowerCase().endsWith("right"),P=e.startsWith("top"),E=e.startsWith("bottom");if((h||P)&&this.resizable){var j=(p-g)/a+this.resizable.size.width;this.setState({maxWidth:j>Number(w)?w:j})}if(D||this.props.lockAspectRatio&&!h&&!P){var j=R+(g-p)/a;this.setState({maxWidth:j>Number(w)?w:j})}if((P||h)&&this.resizable){var j=(d-b)/a+this.resizable.size.height;this.setState({maxHeight:j>Number(S)?S:j})}if(E||this.props.lockAspectRatio&&!P&&!h){var j=n+(b-d)/a;this.setState({maxHeight:j>Number(S)?S:j})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,e,i)},s.prototype.onResize=function(t,e,i,a){var o=this,l={x:this.originalPosition.x,y:this.originalPosition.y},v=-a.width,y=-a.height,z=["top","left","topLeft","bottomLeft","topRight"];z.includes(e)&&(e==="bottomLeft"?l.x+=v:(e==="topRight"||(l.x+=v),l.y+=y));var f=this.draggable.state;(l.x!==f.x||l.y!==f.y)&&Fe.flushSync(function(){o.draggable.setState(l)}),this.updateOffsetFromParent();var w=this.offsetFromParent,S=this.getDraggablePosition().x+w.left,x=this.getDraggablePosition().y+w.top;this.resizingPosition={x:S,y:x},this.props.onResize&&this.props.onResize(t,e,i,a,{x:S,y:x})},s.prototype.onResizeStop=function(t,e,i,a){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),l=o.maxWidth,v=o.maxHeight;this.setState({maxWidth:l,maxHeight:v}),this.props.onResizeStop&&this.props.onResizeStop(t,e,i,a,this.resizingPosition)},s.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},s.prototype.updatePosition=function(t){this.draggable.setState(t)},s.prototype.updateOffsetFromParent=function(){var t=this.props.scale,e=this.getParent(),i=this.getSelfElement();if(!e||i===null)return{top:0,left:0};var a=e.getBoundingClientRect(),o=a.left,l=a.top,v=i.getBoundingClientRect(),y=this.getDraggablePosition(),z=e.scrollLeft,f=e.scrollTop;this.offsetFromParent={left:v.left-o+z-y.x*t,top:v.top-l+f-y.y*t}},s.prototype.render=function(){var t=this,e=this.props,i=e.disableDragging,a=e.style,o=e.dragHandleClassName,l=e.position,v=e.onMouseDown,y=e.onMouseUp,z=e.dragAxis,f=e.dragGrid,w=e.bounds,S=e.enableUserSelectHack,x=e.cancel,N=e.children;e.onResizeStart,e.onResize,e.onResizeStop,e.onDragStart,e.onDrag,e.onDragStop;var m=e.resizeHandleStyles,p=e.resizeHandleClasses,d=e.resizeHandleComponent,u=e.enableResizing,g=e.resizeGrid,b=e.resizeHandleWrapperClass,R=e.resizeHandleWrapperStyle,n=e.scale,h=e.allowAnyClick,D=e.dragPositionOffset,P=Mt(e,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),E=this.props.default?A({},this.props.default):void 0;delete P.default;var j=i||o?{cursor:"auto"}:{cursor:"move"},k=A(A(A({},kt),j),a),_=this.offsetFromParent,B=_.left,L=_.top,U;l&&(U={x:l.x-B,y:l.y-L});var Y=this.state.resizing?void 0:U,q=this.state.resizing?"both":z;return T.createElement(wt,{ref:function(I){I&&(t.draggable=I)},handle:o?".".concat(o):void 0,defaultPosition:E,onMouseDown:v,onMouseUp:y,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:q,disabled:i,grid:f,bounds:w?this.state.bounds:void 0,position:Y,enableUserSelectHack:S,cancel:x,scale:n,allowAnyClick:h,nodeRef:this.resizableElement,positionOffset:D},T.createElement(jt,A({},P,{ref:function(I){I&&(t.resizable=I,t.resizableElement.current=I.resizable)},defaultSize:E,size:this.props.size,enable:typeof u=="boolean"?_t(u):u,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:k,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:g,handleWrapperClass:b,handleWrapperStyle:R,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:m,handleClasses:p,handleComponent:d,scale:this.props.scale}),N))},s.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},s}(T.PureComponent);const Ot=({children:r,title:s="Live Preview",defaultWidth:t=420,defaultHeight:e=480,onClose:i})=>{const[a,o]=T.useState(!0);if(!a)return null;const l=()=>{o(!1),i?.()};return c.jsxs(Wt,{default:{x:120,y:80,width:t,height:e},minWidth:280,minHeight:200,bounds:"window",dragHandleClassName:"floating-preview-title",className:"z-50 fixed shadow-2xl rounded-xl border border-cyan-400 bg-white dark:bg-gray-900 transition-colors",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-cyan-300 bg-gradient-to-r from-cyan-500/20 to-cyan-800/10 rounded-t-xl cursor-move floating-preview-title",children:[c.jsx("span",{className:"font-semibold text-cyan-700 dark:text-cyan-200 select-none",children:s}),c.jsx("button",{onClick:l,className:"text-cyan-600 hover:text-red-500 text-lg font-bold px-2 rounded",title:"Close preview",children:""})]}),c.jsx("div",{className:"overflow-auto p-3 h-full bg-white dark:bg-gray-900 rounded-b-xl",children:r})]})},Ht=(r={})=>{const[s,t]=T.useState(!1),e=T.useRef(null),{rootMargin:i="200px",threshold:a=0,triggerOnce:o=!0}=r;return T.useEffect(()=>{if(!e.current||s&&o)return;const l=e.current,v=new IntersectionObserver(y=>{const[z]=y;z.isIntersecting?(t(!0),o&&v.unobserve(l)):o||t(!1)},{rootMargin:i,threshold:a});return v.observe(l),()=>{v.unobserve(l),v.disconnect()}},[i,a,o,s]),{ref:e,isVisible:s}},ye=({src:r,alt:s,className:t="",width:e,height:i,placeholderColor:a="#f3f4f6",style:o={},onClick:l,gallerySize:v=!1,sizes:y="100vw",loadingStrategy:z="lazy"})=>{const[f,w]=T.useState(null),[S,x]=T.useState(!1),[N,m]=T.useState(!1),{ref:p,isVisible:d}=Ht({rootMargin:z==="eager"?"400px":"200px",threshold:0,triggerOnce:!0}),u=r.includes("firebasestorage.googleapis.com"),g=r.includes("supabase.co/storage");T.useEffect(()=>{if(!d)return;let P=!0,E=null;const j=setTimeout(()=>{P&&!f&&!N&&console.log("Image loading taking longer than expected:",r)},3e3);return(async()=>{try{if(u&&!v){w(r),x(!0);return}if(g)try{const _=await Se(r);if(P&&(w(_),!v)){x(!0);return}}catch(_){if(console.error("Error getting proxied URL:",_),P&&(w(r),!v)){x(!0);return}}if(v)try{const B=await(await fetch(r)).blob(),L=await et(B,400,400);P&&(E=URL.createObjectURL(L),w(E))}catch(_){console.warn(`Failed to resize image, using original: ${r}`,_),P&&w(r)}else w(r)}catch(_){console.error(`Failed to load image: ${r}`,_),P&&(m(!0),u&&(w(r),x(!0)))}})(),()=>{P=!1,clearTimeout(j),E&&URL.revokeObjectURL(E)}},[d,r,v,u,g]);const b=()=>{x(!0)},R=()=>{m(!0),console.error(`Error loading image: ${r}`)},[n,h]=T.useState(void 0);T.useEffect(()=>{!r.startsWith("data:")&&!r.startsWith("blob:")?g?(async()=>{try{const P=await Se(r);h(`${P} 1x, ${P} 2x`)}catch(P){console.error("Error generating srcSet:",P),h(`${r} 1x, ${r} 2x`)}})():h(`${r} 1x, ${r} 2x`):h(void 0)},[r,g]);const D=e&&i?i/e*100:0;return c.jsxs("div",{ref:p,className:`relative overflow-hidden ${t}`,style:{backgroundColor:a,paddingBottom:D?`${D}%`:void 0,...o},onClick:l,children:[f&&c.jsx("img",{src:f,alt:s,className:`transition-opacity duration-300 ${S?"opacity-100":"opacity-0"} absolute inset-0 w-full h-full object-contain`,onLoad:b,onError:R,width:e,height:i,sizes:y,srcSet:n}),(!f||!S)&&!N&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}),N&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"text-red-500",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})})]})},At=({images:r,onImageClick:s,className:t="",itemClassName:e="",columnCount:i=3,itemGap:a=16,loadingStrategy:o="lazy"})=>{const[l,v]=T.useState(0),[y,z]=T.useState(20),f=T.useRef(null),w=T.useRef(null),S=T.useRef(null),x=T.useCallback(()=>{if(!f.current)return 20;const d=f.current.clientWidth,u=window.innerHeight,b=(d-(i-1)*a)/i;return(Math.ceil(u/(b+a))+2)*i},[i,a]);T.useEffect(()=>{if(S.current)return w.current=new IntersectionObserver(d=>{const[u]=d;if(u.isIntersecting&&y<r.length){const g=x();z(b=>Math.min(b+g,r.length))}},{rootMargin:"200px"}),w.current.observe(S.current),()=>{w.current&&w.current.disconnect()}},[y,r.length,x]),T.useEffect(()=>{const d=()=>{const u=x();z(g=>Math.min(l+u,r.length))};return window.addEventListener("resize",d),d(),()=>{window.removeEventListener("resize",d)}},[l,r.length,x]);const N=r.slice(l,y),m=d=>{s&&s(d)},p=`repeat(${i}, 1fr)`;return c.jsxs("div",{ref:f,className:`w-full ${t}`,children:[c.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:p,gap:`${a}px`},children:N.map(d=>c.jsxs("div",{className:`cursor-pointer group relative overflow-hidden rounded-lg ${e}`,onClick:()=>m(d),children:[c.jsx(ye,{src:d.src,alt:d.alt||"Gallery image",className:"w-full h-full transition-transform duration-300",style:{transform:`scale(${d.scale||1})`,transformOrigin:"center center"},gallerySize:!0,loadingStrategy:o,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"}),c.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-20 transition-opacity"}),d.displayText&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-black bg-opacity-50 text-white",children:c.jsx("p",{className:"text-sm truncate",children:d.displayText})})]},d.id))}),y<r.length&&c.jsx("div",{ref:S,className:"w-full h-20 flex items-center justify-center mt-4",children:c.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}),y>=r.length&&r.length>0&&c.jsx("div",{className:"w-full text-center text-gray-500 mt-4 py-4",children:"All images loaded"}),r.length===0&&c.jsx("div",{className:"w-full text-center text-gray-500 mt-4 py-8",children:"No images available"})]})},Lt=({onChooseFullTemplate:r,onChooseWizard:s,fullTemplateAvailable:t})=>c.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 futuristic-container",children:[c.jsx(F,{text:"Choose Your Template Creation Method",as:"h2",variant:"subtitle",className:"text-2xl font-bold mb-6 text-center"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[t?c.jsxs("div",{className:"p-6 rounded-lg border border-cyan-200 dark:border-cyan-800 bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 hover:shadow-lg transition-all duration-300 flex flex-col items-center text-center",children:[c.jsx(F,{text:"Full Template",as:"h3",variant:"subtitle",className:"text-xl font-semibold mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Get the complete pre-defined template with all features included. Best for users who want a ready-to-use solution."}),c.jsx(K,{onClick:r,className:"mt-auto",children:"Use Full Template"})]}):c.jsxs("div",{className:"p-6 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex flex-col items-center text-center opacity-60",children:[c.jsx(F,{text:"Full Template",as:"h3",variant:"subtitle",className:"text-xl font-semibold mb-4 text-gray-400"}),c.jsx("p",{className:"text-gray-400 dark:text-gray-500 mb-6",children:"The administrator has not uploaded a full template yet. Please use the Template Builder Wizard instead."}),c.jsx(K,{disabled:!0,className:"mt-auto opacity-50 cursor-not-allowed",children:"Not Available"})]}),c.jsxs("div",{className:"p-6 rounded-lg border border-cyan-200 dark:border-cyan-800 bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 hover:shadow-lg transition-all duration-300 flex flex-col items-center text-center",children:[c.jsx(F,{text:"Template Builder Wizard",as:"h3",variant:"subtitle",className:"text-xl font-semibold mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Build your template step-by-step by answering questions. Customize the template to your specific needs."}),c.jsx(K,{onClick:s,variant:"primary",className:"mt-auto",children:"Start Wizard"})]})]})]}),Bt={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{staggerChildren:.1}}},oe={initial:{opacity:0,y:10},animate:{opacity:1,y:0}},Yt=()=>{const{getBannerImage:r,getScannerImages:s,getTemplates:t,getFullTemplate:e}=tt(),{currentUser:i}=nt(),{theme:a}=at(),{state:o,dispatch:l}=Ue(),{questions:v}=rt(),{sections:y}=it(),[z,f]=T.useState(null),[w,S]=T.useState(""),[x,N]=T.useState(!0),[m,p]=T.useState("initial"),[d,u]=T.useState(0),[g,b]=T.useState(new Set),[R,n]=T.useState(""),[h,D]=T.useState(!1),[P,E]=T.useState([]),[j,k]=T.useState(null),[_,B]=T.useState("");te.useEffect(()=>{l({type:"SET_QUESTIONS",payload:v})},[v,l]),te.useEffect(()=>{l({type:"SET_SECTIONS",payload:y})},[y,l]);const L=r(),[U,Y]=T.useState([]);te.useEffect(()=>{try{const C=s();Y(C),console.log("Scanner Images loaded:",C.length)}catch(C){console.error("Error loading scanner images:",C),Y([])}},[s]),te.useEffect(()=>{try{const{code:C,isEnabled:M}=e();n(C),D(M);const W=localStorage.getItem(`user_templates_${i?.id}`);W&&E(JSON.parse(W))}catch(C){console.error("Error loading templates:",C)}},[e,i]);const q=()=>{d<o.questions.length-1&&u(d+1)},I=()=>{d>0&&u(d-1)},xe=()=>{const C=o.questions[d]?.id;if(C){const M=new Set(g);M.add(C),b(M),d<o.questions.length-1&&u(d+1)}},we=()=>{if(!_.trim()){alert("Please enter a template name");return}const C={id:`template-${Date.now()}`,name:_,code:m==="fullTemplate"?R:"",answers:o.answers,skippedQuestions:Array.from(g),createdAt:new Date().toISOString(),userId:i?.id},M=[...P,C];E(M),i?.id&&localStorage.setItem(`user_templates_${i.id}`,JSON.stringify(M)),B(""),alert("Template saved successfully!")},Ge=C=>{const M=P.filter(W=>W.id!==C);E(M),i?.id&&localStorage.setItem(`user_templates_${i.id}`,JSON.stringify(M)),j===C&&k(null)},Ve=C=>{const M=P.find(W=>W.id===C);M&&(k(C),M.code?(p("fullTemplate"),n(M.code)):M.answers&&(p("wizard"),l({type:"SET_ANSWERS",payload:M.answers}),b(new Set(M.skippedQuestions||[]))))},de=(C,M)=>{l({type:"SET_ANSWER",payload:{questionId:C,value:M}})},Qe=C=>{const M=o.answers[C.id];switch(C.type){case"text":return c.jsx(ue,{label:C.text,value:M||"",onChange:W=>de(C.id,W.target.value),required:C.required,className:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600"});case"choice":return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[C.text," ",C.required&&c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:C.options?.map(W=>c.jsxs("label",{className:`
                    flex flex-col items-center p-4 border rounded-lg cursor-pointer
                    transition-all duration-150 ease-in-out
                    ${M===W.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 ring-2 ring-blue-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"}
                  `,children:[c.jsx("input",{type:"radio",name:C.id,value:W.value,checked:M===W.value,onChange:()=>de(C.id,W.value),className:"sr-only"}),W.imageUrl&&c.jsx("img",{src:W.imagePreview||W.imageUrl,alt:W.text,className:"w-full h-32 object-contain mb-2 rounded",style:{transform:`scale(${W.scale||1})`}}),c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:W.text})]},W.id))})]});case"boolean":return c.jsx(st,{label:C.text,checked:!!M,onChange:W=>de(C.id,W.target.checked),required:C.required});default:return null}};return c.jsx("div",{className:a==="dark"?"dark":"",children:c.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-200 futuristic-grid-bg",children:[c.jsx(ot,{}),c.jsxs(Q.div,{variants:Bt,initial:"initial",animate:"animate",className:"relative",children:[c.jsx(Q.div,{variants:oe,className:"py-12 px-4 text-center",children:c.jsx(F,{text:"COMET Scanner Template Wizard",as:"h1",variant:"title",className:"text-5xl md:text-6xl lg:text-7xl font-bold font-display tracking-tight"})}),c.jsx(Q.div,{variants:oe,className:"relative w-full mb-12 bg-gray-100 dark:bg-gray-800 holo-glow",children:L?c.jsx("div",{className:"relative w-full flex items-center justify-center overflow-hidden",children:c.jsx("div",{className:"w-full",style:{paddingBottom:"42.85%"},children:c.jsx(ye,{src:L.src,alt:"COMET Scanner Banner",className:"absolute top-0 left-0 w-full h-full object-contain transition-transform duration-300",style:{transform:`scale(${L.scale||1})`,transformOrigin:"center center"},loadingStrategy:"eager"})})}):c.jsx("div",{className:"w-full",style:{paddingBottom:"42.85%"},children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center",children:c.jsx(F,{text:"Visualize Your Data with COMET Scanner",as:"span",variant:"subtitle",className:"text-3xl font-semibold"})})})}),U.length>0&&c.jsxs(Q.div,{variants:oe,className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-16",children:[c.jsx(F,{text:"Scanner Variations",as:"h2",variant:"title",className:"text-4xl md:text-5xl font-bold mb-8 text-center"}),c.jsx(At,{images:U,onImageClick:C=>{f(C.src),S(C.displayText||"Scanner Variation")},columnCount:3,itemGap:16,className:"mb-8",itemClassName:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transform transition-transform hover:scale-105",loadingStrategy:"lazy"})]}),c.jsxs("div",{className:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[m==="initial"&&c.jsx(Lt,{onChooseFullTemplate:()=>p("fullTemplate"),onChooseWizard:()=>p("wizard"),fullTemplateAvailable:!!R&&h}),m==="fullTemplate"&&c.jsxs("div",{className:"space-y-8",children:[c.jsx(F,{text:"Complete COMET Scanner Template",as:"h2",variant:"subtitle",className:"text-3xl font-bold mb-6 text-center"}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:c.jsx("pre",{className:"overflow-auto p-4 bg-gray-50 dark:bg-gray-900 text-sm text-gray-800 dark:text-gray-200 font-mono rounded-lg max-h-[60vh]",children:c.jsx("code",{children:R})})}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-center mt-8",children:[c.jsx(ue,{value:_,onChange:C=>B(C.target.value),placeholder:"Enter a name for this template",className:"w-full md:w-64"}),c.jsx(K,{onClick:we,children:"Save Template"})]})]}),m==="wizard"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-8",children:c.jsxs(Q.div,{variants:oe,children:[c.jsx(F,{text:"Configure Your Template",as:"h2",variant:"subtitle",className:"text-3xl font-bold mb-6"}),o.questions.length>0?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700 futuristic-container",children:Qe(o.questions[d])}),c.jsxs("div",{className:"flex justify-between mt-6",children:[c.jsx(K,{onClick:I,disabled:d===0,variant:"secondary",children:"Previous"}),c.jsx(K,{onClick:xe,variant:"outline",children:"Skip"}),c.jsx(K,{onClick:q,disabled:d===o.questions.length-1,children:"Next"})]}),c.jsxs("div",{className:"mt-4 text-center",children:[c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Question ",d+1," of ",o.questions.length]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-2",children:c.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${(d+1)/o.questions.length*100}%`}})})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-center mt-8 pt-8 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(ue,{value:_,onChange:C=>B(C.target.value),placeholder:"Enter a name for this template",className:"w-full md:w-64"}),c.jsx(K,{onClick:we,children:"Save Progress"})]})]}):c.jsx(F,{text:"No questions configured yet. Please set them up in the Admin Dashboard.",as:"p",className:"text-gray-500 dark:text-gray-400"})]})}),c.jsx("div",{className:"lg:col-span-1 flex flex-col items-end",children:c.jsxs("button",{className:"mb-4 px-4 py-2 bg-cyan-600 text-white rounded hover:bg-cyan-700 transition",onClick:()=>N(C=>!C),children:[x?"Hide":"Show"," Live Preview"]})})]}),c.jsxs("div",{className:"mt-16 pt-8 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(F,{text:"Saved Templates",as:"h2",variant:"subtitle",className:"text-2xl font-bold mb-6"}),P.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(C=>c.jsxs("div",{className:`p-4 rounded-lg border ${j===C.id?"border-blue-500 ring-2 ring-blue-500":"border-gray-200 dark:border-gray-700"}
                        bg-white dark:bg-gray-800 shadow hover:shadow-md transition-all cursor-pointer`,onClick:()=>Ve(C.id),children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:C.name}),c.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:M=>{M.stopPropagation(),Ge(C.id)},children:""})]}),c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created: ",new Date(C.createdAt).toLocaleDateString()]}),c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Type: ",C.code?"Full Template":"Wizard Template"]})]},C.id))}):c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No saved templates yet. Create and save a template to see it here."})]})]})]}),x&&c.jsx(Ot,{title:"Live Code Preview",onClose:()=>N(!1),children:c.jsx(ut,{skippedQuestions:g,fullTemplateMode:m==="fullTemplate",fullTemplateCode:R})}),z&&c.jsx(ct,{isOpen:!0,onClose:()=>{f(null),S("")},title:w,size:"xl",children:c.jsx("div",{className:"relative",children:c.jsx("div",{className:"flex justify-center items-center bg-white dark:bg-gray-800 rounded-lg p-4",children:c.jsx("div",{className:"holo-glow",children:c.jsx(ye,{src:z,alt:w,className:"max-w-full max-h-[80vh] object-contain",loadingStrategy:"eager"})})})})})]})})};export{Yt as default};
